<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rock+Salt">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <link rel="stylesheet" th:href="@{/style/cart.css}">
    <link rel="stylesheet" th:href="@{/style/header.css}">
    <link rel="stylesheet" th:href="@{/style/footer.css}">
    <title>Товари</title>
</head>


<body>

    <div class="header">
        <div id="topHeader">
            <div class="logo">
                <nobr>Logo</nobr>
            </div>
            <div class="miniMedia">
                <i class="fab fa-facebook-square"></i>
                <i class="fab fa-viber"></i>
                <i class="fab fa-telegram"></i>
                <i class="fas fa-phone-square-alt"></i>
            </div>
        </div>
    </div>

    <nav class="navbar sticky-top navbar-expand-md bg-white navbar-dark" id="headerButtons">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon">
                <i class="fas fa-bars" style="color: #121212;; font-size:28px;"></i>
            </span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <a class="headerButton" href="index.html">
                <p>ГОЛОВНА</p>
            </a>
            <div class="dropdown headerButton">
                <div class="headerButton1" onclick="window.location='products.html'">
                    <p>КАТЕГОРІЇ</p>
                </div>
                <div class="dropdown-content">
                    <div>
                        <a href="#">КУРТКИ</a>
                        <a href="#">ПАЛЬТА</a>
                    </div>
                    <div>
                        <a href="#">ЖАКЕТИ</a>
                        <a href="#">СВЕТРИ</a>
                    </div>
                    <a href="#">ХУТРО</a>
                </div>
            </div>
            <div class="headerButton">
                <p>ПРО НАС</p>
            </div>
            <div class="headerButton">
                <p>ДОСТАВКА</p>
            </div>
            <a class="headerButton" href="cart.html">
                <p>КОШИК <i class="fas fa-shopping-cart"></i></p>
            </a>
        </div>
    </nav>

    <h1>КОШИК</h1>

    <div class="cart">


            <h4 id="big-total"></h4>

            <div class="order-button">
                <button id="checkoutButton" type="button" data-toggle="modal" data-target="#exampleModal">

                <p>Оформити замовлення</p>
                </button>
            </div>

        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Оформлення замовлення</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="needs-validation" novalidate>
                            <div class="form-row">
                                <div class="col-md-6 mb-3">
                                    <label for="validationCustom01">Ім'я</label>
                                    <input type="text" class="form-control" id="validationCustom01" value="" required>
                                    <div class="invalid-feedback">
                                        Буль ласка, введіть ім'я.
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="validationCustom02">Прізвище</label>
                                    <input type="text" class="form-control" id="validationCustom02" value="" required>
                                    <div class="invalid-feedback">
                                        Буль ласка, введіть прізвище.
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-md-6 mb-3">
                                    <label for="validationCustom03">Область</label>
                                    <input type="text" class="form-control" id="validationCustom03" required>
                                    <div class="invalid-feedback">
                                        Будь ласка, введіть дійсну область.
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="validationCustom03">Місто</label>
                                    <input type="text" class="form-control" id="validationCustom04" required>
                                    <div class="invalid-feedback">
                                        Будь ласка, введіть дійсне місто область.
                                    </div>
                                </div>

                            </div>
                            <div class="form-row">
                                <div class="col-md-6 mb-3">
                                    <label for="validationCustom05">Номер телефону</label>
                                    <input type="text" class="form-control" id="validationCustom05" required pattern=pattern="+380[0-9]{9}}">
                                    <div class="invalid-feedback">
                                        Буль ласка, введіть дійсний номер телефону.
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="validationCustom05">№ відділення НП</label>
                                    <input type="text" class="form-control" id="validationCustom06" required pattern=pattern="[0-9]{1,3}">
                                    <div class="invalid-feedback">
                                        Буль ласка, введіть дійсний номер відділення НП.
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Відмінити</button>
                            <button type="submit" class="btn btn-primary" style="background-color: #FAA2A2; border: none">Оформити замовлення</button>
                        </form>

                    </div>
                </div>
            </div>
        </div>


    </div>



    <footer class="footer">
        <div class="logo">
            <nobr style="color: #ffffff; margin: auto; vertical-align: middle; line-height: 150px;">Logo</nobr>
        </div>
        <div class="rights">
            <p>All rights reserved. 2020®</p>
        </div>
        <div class="media">
            <i class="fab fa-facebook-square"></i>
            <i class="fab fa-viber"></i>
            <i class="fab fa-telegram"></i>
            <i class="fas fa-phone-square-alt"></i>
        </div>
    </footer>

</body>

<script>
    let items = [];
    let totalPrice = 0;
    items = JSON.parse(localStorage.getItem("card"));
    for (let i = 0; i < items.length; i++){
        $( `<div class='item'>` +
            `<img src='${items[i].image}'/>` +
            `<div class="description">` +
            `<h4>${items[i].name}</h4>` +
            `<div class="color">` +
            `<p>Колір: </p>` +
            `<div class="color-circle" style="background-color: ${items[i].color}"></div>` +
            `</div>` +
            `<p>Розмір: ${items[i].size}</p>` +
            `</div>` +
            `<div class="prices">` +
            `<div class="price-for-one">` +
            `<p>Ціна за од.</p>` +
            `<h4>${items[i].price}</h4>` +
            `</div>` +
            `<div class="amount">` +
            `<p>К-сть</p>` +
            `<h4>${items[i].amount}</h4>` +
            `</div>` +
            `<div class="total">` +
            `<h4>Всього</h4>` +
            `<h4>${items[i].amount * items[i].price}</h4>` +
            `</div>` +
            `</div>` +
            `<i class="fas fa-times" onclick="deleteItem(${items[i].randomKey})"></i>` +
            `</div>` ).prependTo( ".cart" );
        totalPrice = totalPrice + (items[i].amount * items[i].price);
    }
    document.getElementById("big-total").innerText = "Всього до сплати: " + totalPrice;
</script>

<script>
    function deleteItem(key){
        console.log(key);
        items = JSON.parse(localStorage.getItem("card"));
        for(let i = 0; i < items.length; i++){
            if (Number(items[i].randomKey) === Number(key)){
                items.splice(i, 1);
                break;
            }
        }
        localStorage.setItem("card", JSON.stringify(items));
        location.reload();
    }
</script>

<script th:src="@{js/index.js}"></script>
<script th:src="@{js/item.js}"></script>
<script th:src="@{js/cart.js}"></script>
<script src="https://kit.fontawesome.com/54144e2123.js"></script>


</html>